/* Base AppLayout — flex column container */
.app-layout {
  display: flex;
  flex-direction: column;
  overflow: hidden;

  --_height: var(--vers-comp-app-layout-height, 100vh);
  --_min-height: var(--vers-comp-app-layout-min-height, auto);
  --_header-height: var(--vers-comp-app-layout-header-height, 3.5rem);
  --_bottom-height: var(--vers-comp-app-layout-bottom-height, 4rem);
  --_sidebar-width: var(--vers-comp-app-layout-sidebar-width, 15rem);
  --_main-max-width: var(--vers-comp-app-layout-main-max-width, 1200px);
  --_transition: all var(--vers-transition-base) ease-out;

  height: var(--_height);
  min-height: var(--_min-height);
  background-color: var(--vers-color-background, #ffffff);
  color: var(--vers-color-text-primary);
  font-family: var(--vers-typography-body-font-family);
  font-size: var(--vers-typography-body-size);
  line-height: var(--vers-typography-body-line-height);
}

/* Header — fixed-height flex item */
.app-layout-header {
  flex-shrink: 0;
  z-index: 10;
  border-bottom: 1px solid var(--vers-color-border, #e5e5e5);
  background-color: var(--vers-color-background, #ffffff);
  transition: var(--_transition);
}

/* Body — fills remaining space, hosts the inner grid */
.app-layout-body {
  flex: 1;
  display: grid;
  overflow: hidden;
  min-height: 0;
  transition: var(--_transition);

  /* Default: classic (left sidebar + main) */
  grid-template-areas:
    "side-left main"
    "bottom    bottom";
  grid-template-columns: var(--_sidebar-width) 1fr;
  grid-template-rows: 1fr auto;
}

/* VARIANT: classic */
.app-layout[data-variant="classic"] .app-layout-body {
  grid-template-areas:
    "side-left main"
    "bottom    bottom";
  grid-template-columns: var(--_sidebar-width) 1fr;
  grid-template-rows: 1fr auto;
}

/* VARIANT: split — both sidebars */
.app-layout[data-variant="split"] .app-layout-body {
  grid-template-areas:
    "side-left main side-right"
    "bottom    bottom  bottom";
  grid-template-columns: var(--_sidebar-width) 1fr var(--_sidebar-width);
  grid-template-rows: 1fr auto;
}

/* VARIANT: full — no sidebars */
.app-layout[data-variant="full"] .app-layout-body {
  grid-template-areas:
    "main"
    "bottom";
  grid-template-columns: 1fr;
  grid-template-rows: 1fr auto;
}

/* VARIANT: mobile — single column, no sidebars */
.app-layout[data-variant="mobile"] .app-layout-body {
  grid-template-areas:
    "main"
    "bottom";
  grid-template-columns: 1fr;
  grid-template-rows: 1fr auto;
}


/* REGION: Main */
.app-layout-main {
  grid-area: main;
  overflow-y: auto;
  overflow-x: hidden;
  position: relative;
  min-width: 0;
  transition: var(--_transition);
}

/* Custom scrollbar for main content */
.app-layout-main::-webkit-scrollbar {
  width: 8px;
}

.app-layout-main::-webkit-scrollbar-track {
  background: transparent;
}

.app-layout-main::-webkit-scrollbar-thumb {
  background: var(--vers-color-border, #e5e5e5);
  border-radius: 4px;
  transition: background-color var(--vers-transition-fast);
}

.app-layout-main::-webkit-scrollbar-thumb:hover {
  background: var(--vers-color-text-tertiary, #999);
}

/* ============================================
   PLACEMENT: full-width vs centred
   ============================================ */

/* Centred: Constrain width and center children horizontally */
.app-layout-main[data-placement="centred"] {
  display: flex;
  flex-direction: column;
  padding: 0 var(--vers-spacing-4, 1rem);
}

.app-layout-main[data-placement="centred"] > * {
  max-width: var(--_main-max-width);
  margin-left: auto;
  margin-right: auto;
  width: 100%;
  min-width: 0;
}

@media (min-width: 768px) {
  .app-layout-main[data-placement="centred"] {
    padding: 0 var(--vers-spacing-6, 1.5rem);
  }
}

/* REGION: Side left */
.app-layout-side-left {
  grid-area: side-left;
  overflow-y: auto;
  overflow-x: hidden;
  border-right: 1px solid var(--vers-color-border, #e5e5e5);
  background-color: var(--vers-color-background-secondary, #f9f9f9);
  transition: var(--_transition);
}

/* REGION: Side right */
.app-layout-side-right {
  grid-area: side-right;
  overflow-y: auto;
  overflow-x: hidden;
  border-left: 1px solid var(--vers-color-border, #e5e5e5);
  background-color: var(--vers-color-background-secondary, #f9f9f9);
  transition: var(--_transition);
}

/* REGION: Bottom */
.app-layout-bottom {
  grid-area: bottom;
  overflow-y: auto;
  overflow-x: hidden;
  border-top: 1px solid var(--vers-color-border, #e5e5e5);
  background-color: var(--vers-color-background, #ffffff);
  transition: var(--_transition);
}

/* VISIBILITY: Header and Bottom overrides */
.app-layout[data-hide-header] .app-layout-header { display: none; }
.app-layout[data-hide-bottom] .app-layout-bottom { display: none; }

/* Hide sidebars when not in the variant's grid area */
.app-layout[data-variant="classic"] .app-layout-side-right,
.app-layout[data-variant="full"] .app-layout-side-left,
.app-layout[data-variant="full"] .app-layout-side-right,
.app-layout[data-variant="mobile"] .app-layout-side-left,
.app-layout[data-variant="mobile"] .app-layout-side-right {
  display: none;
}


/* RESPONSIVE: Large screens */
@media (min-width: 1280px) {
  .app-layout { --_sidebar-width: 16rem; }
}

/* ACCESSIBILITY: Reduced motion */
@media (prefers-reduced-motion: reduce) {
  .app-layout,
  .app-layout-header,
  .app-layout-body,
  .app-layout-main,
  .app-layout-side-left,
  .app-layout-side-right,
  .app-layout-bottom {
    transition: none;
  }
}
